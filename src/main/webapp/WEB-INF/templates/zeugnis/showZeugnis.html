<!DOCTYPE html>
<!-- PARAMS:
    schueler - Liste der Schueler der Klasse
    zeugnis - das ausgewählte Zeugnis
-->
<html lang="de-DE" xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
    layout:decorator="/main">
<head>
<script type="text/javascript"
    src="../../../resources/js/jquery-1.8.2.js" th:remove="all"></script>
<script type="text/javascript"
    src="../../../resources/js/thymelaefbs.js?1" th:remove="all"></script>
</head>
<body>
    <div layout:fragment="content">
        <div class="zeugnisNav" th:with="formId='chooseSchuelerFormTop'" th:fragment="zeugnisNav">
            <form class="form-horizontal" th:id="${formId}" method="get"
                th:object="${zeugnis}" th:action="@{${urlShowZeugnis}}">
                <input type="hidden" th:value="${zeugnis.klasse.id}"
                    th:name="#{par.zeugnis.klassen_id}" />
                <input type="hidden"
                    th:value="${zeugnis.schulhalbjahr.id}"
                    th:name="#{par.zeugnis.halbjahr_id}" />
                Sch&uuml;ler der Klasse <span
                    th:remove="tag" th:text="${zeugnis.klasse}"></span> <select
                    name="schuelerIndex">
                    <option th:each="item, stat : ${schueler}" th:value="${stat.index}"
                        th:text="${item}" th:selected="${item.id == zeugnis.schueler.id}"
                        th:disabled="${not item.isActive()}"></option>
                </select>
                <button type="submit" class="btn">Aktualisieren</button>
                <a class="btn" th:disabled="${schuelerIndex == 0}"
                    th:href="@{${urlShowZeugnis}(klassenId=${zeugnis.klasse.id}, halbjahrId=${zeugnis.schulhalbjahr.id}, schuelerIndex=${schuelerIndex - 1})}">
                    <i class="prev"></i>Vorheriger Sch&uuml;ler
                </a> <a class="btn" th:disabled="${schuelerIndex +1 ge schueler.size()}"
                    th:href="@{${urlShowZeugnis}(klassenId=${zeugnis.klasse.id}, halbjahrId=${zeugnis.schulhalbjahr.id}, schuelerIndex=${schuelerIndex + 1})}">
                    <i class="next"></i>N&auml;chster Sch&uuml;ler
                </a> <a class="btn" th:href="@{${urlPrintZeugnis}}"><i class="pdf"></i>Zeugnis
                    anzeigen</a>
            </form>
        </div>
        <h1>Zeugnis f&uuml;r <b th:text="${zeugnis.schueler.name}+', '+${zeugnis.schueler.vorname}"></b> im Schulhalbjahr <b th:text="${zeugnis.schulhalbjahr}"></b></h1>
        <div class="row-fluid">
            <div class="span6" th:with="bewertungen=${otherBewertungen}" th:fragment="table">
                <table class="table table-striped table-bordered table-hover table-condensed" th:unless="${#lists.isEmpty(bewertungen)}">
                    <thead>
                        <tr>
                            <th>Schulfach</th>
                            <th>Note</th>
                        </tr>
                    </thead>
                    <tbody>
                        <div th:each="bewertungInstance, stat:${bewertungen}" th:remove="tag">
                            <tr th:class="${(bewertungInstance.id==lastEditedBewertung) ? 'lastEdited':''}">
                            <td>
                                <a href="bewertungErfassung:editBewertung{bewertungInstance.id}"
                                    th:text="${bewertungInstance.schulfach}"></a>
                            </td>
                            <td>
                                <a href="bewertungErfassung:editBewertung{bewertungInstance.id}"
                                    th:text="${bewertungInstance.notenDarstellung()}"></a>
                            </td>
                            </tr>
                        </div>
                    </tbody>
                </table>
            </div>
            <div class="span6" th:with="bewertungen=${wpBewertungen}" th:include="zeugnis/showZeugnis::table">
            </div>
        </div>
        <h2>Biblischer Unterricht und SoL <a href="@zeugnisErfassung.editBuUndSoL ${zeugnis.id}">bearbeiten</a></h2>
        <div class="buUndSoLBeurteilungen row-fluid">
            <div class="span12">
            <table class="table table-striped table-bordered table-hover table-condensed">
                <thead>
                    <tr>
                        <th>Biblischer Unterricht</th>
                        <th>SoL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td th:text="${zeugnis.buBewertungsText}"></td>
                        <td th:text="${zeugnis.soLBewertungsText?.text}"></td>
                    </tr>
                </tbody>
            </table>
            </div>
        </div>
        <h2>Arbeits- und Sozialverhalten <a href="zeugnisErfassung:editArbeitsUndSozialVerhalten.${zeugnisInstance?.id}">bearbeiten</a></h2>
        <div class="avSvBeurteilungen row-fluid">
            <div class="span6" th:with="bewertungen=${zeugnis.avBewertungen}, head='Arbeitsverhalten'" th:fragment="AvSvtable">
            <table class="table table-striped table-bordered table-hover table-condensed" >
                <thead>
                    <tr>
                        <th th:text="${head}">Arbeitsverhalten</th>
                        <th>Beurteilung</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="avSvBew : ${bewertungen}">
                        <td th:text="${avSvBew?.arbeitsUndSozialVerhalten?.name}">
                        </td>
                        <td th:text="${avSvBew?.beurteilung?.buchstabe}">
                        </td>
                    </tr>
                </tbody>
            </table>
            </div>
            <div class="span6" th:with="bewertungen=${zeugnis.svBewertungen}, head='Sozialverhalten'" th:include="zeugnis/showZeugnis::AvSvtable">
            </div>
        </div>

        <div class="zeugnisNav" th:with="formId='chooseSchuelerFormBottom'" th:include="zeugnis/showZeugnis::zeugnisNav">
        </div>
    </div>
</body>
</html>
